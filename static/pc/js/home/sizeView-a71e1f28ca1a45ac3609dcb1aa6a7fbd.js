define(["jquery","home/preload"],function(e,t){function n(e){this.$el=e,this.isLoaded=!1,this.init()}return e.extend(n.prototype,{init:function(){var e=this;this.adjustLayout(),this.initZoomSize(),this.initSwitcher()},isReady:function(){return this.isLoaded},getHeight:function(){return this.$el.height()},getZoomRatio:function(){var t=1920;return e(document).width()/t},load:function(){var n=0,r=this;this.$el.find(".bg").each(function(){$this=e(this),t($this,function(e){n++,e.$el.attr("src",e.src).show(),n==3&&(r.isLoaded=!0)})})},setPosition:function(){var t=e(document).width(),n=this.$el.find(".wrap"),r=this.$el.find(".handler"),i=this;r.hide(),setTimeout(function(){n.animate({width:t-150},1200,"easeOutElastic",function(){n.animate({width:t/2},1600,"easeOutElastic",function(){r.fadeIn(800),i.setPosition=null})})},600)},adjustLayout:function(){var t=this.getZoomRatio(),n=e(document).width();this.$el.find(".switcher").css({top:t*370,left:t*1310});var r=this.$el.find(".wrap");this.$el.find(".wrap>img").css("width",n),r.css({width:n/2,"max-width":n}),this.$el.find(".handler").css("left",r.width()-38)},initZoomSize:function(t){var n=this.$el.find(".handler"),r=this.$el.find(".wrap");n.mousedown(function(t){var i=t.pageX,s=r.width();e(document).on("mousemove",function(e){var t=e.pageX-i;r.css("width",s+t),n.css("left",r.width()-38)})}),e(document).mouseup(function(){e(document).unbind("mousemove")})},initSwitcher:function(){var t=this;this.$el.find("span").click(function(){t.$el.find("span").removeClass("active"),e(this).addClass("active"),e(this).parent().hasClass("hei")?(t.$el.find(".black").css("z-index",2),t.$el.find(".white").css("z-index",1)):(t.$el.find(".black").css("z-index",1),t.$el.find(".white").css("z-index",2))})}}),n});